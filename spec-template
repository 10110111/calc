Summary: C-style arbitrary precision calculator
Name: calc
Version: ${VERSION}
Release: ${RELEASE}
Copyright: LGPL
Group: Applications/Engineering
Source: http://www.isthe.com/chongo/src/calc/calc-${VER_CALC}.tar.gz
BuildRoot: /var/tmp/%{name}-buildroot

%description
Calc is an interactive calculator which provides for easy large numeric
calculations, but which also can be easily programmed for difficult or
long calculations.

All numbers are represented as fractions with arbitrarily large numerators
and denominators which are always reduced to lowest terms.  Real or
exponential format numbers are converted to the equivalent fraction.
One use enter decinal, hex, octal, binary and complex values.

Commands are statements in a C-like language, where each input line is
treated as the body of a procedure.  You can define your own functions
by using the 'define' keyword, followed by a function declaration very
similar to C.  Calc also comes with a rich set of builtin functions
and calc shell commands.

In addition to numeric global, local and static variables, Calc as
lists, associated arrays, matrices, byte blocks, dymanic strings and
user defined objects.

%prep
%setup -q

%build
make RPM_OPT_FLAGS="$RPM_OPT_FLAGS"

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT${BINDIR}
mkdir -p $RPM_BUILD_ROOT${SHAREDIR}
mkdir -p $RPM_BUILD_ROOT${INCDIR}
mkdir -p $RPM_BUILD_ROOT${LIBDIR}
mkdir -p $RPM_BUILD_ROOT${CSHAREDIR}
mkdir -p $RPM_BUILD_ROOT${HELPDIR}
mkdir -p $RPM_BUILD_ROOT${INCDIRCALC}
mkdir -p $RPM_BUILD_ROOT${CUSTOMLIBDIR}
mkdir -p $RPM_BUILD_ROOT${CUSTOMHELPDIR}
mkdir -p $RPM_BUILD_ROOT${CUSTOMINCDIR}
mkdir -p $RPM_BUILD_ROOT${SCRIPTDIR}
mkdir -p $RPM_BUILD_ROOT${MANDIR}

install -m 0555 calc $RPM_BUILD_ROOT${BINDIR}

(cd help
 install -m 0444 ${STD_HELP_FILES} $RPM_BUILD_ROOT${HELPDIR}
 install -m 0444 ${BLT_HELP_FILES} $RPM_BUILD_ROOT${HELPDIR}
 install -m 0444 builtin full $RPM_BUILD_ROOT${HELPDIR}
 install -m 0444 ${DETAIL_HELP} $RPM_BUILD_ROOT${HELPDIR}
 install -m 0444 ${SINGULAR_FILES} $RPM_BUILD_ROOT${HELPDIR}
 install -m 0444 obj.file $RPM_BUILD_ROOT${HELPDIR}/obj
)

(cd cal; install -m 0444 ${CALC_FILES} $RPM_BUILD_ROOT${LIBDIR})

(cd custom
 if [ ! -z "${INSTALL_H_SRC}" ]; then
     install -m 0444 ${INSTALL_H_SRC} $RPM_BUILD_ROOT${CUSTOMINCDIR}
 fi
 install -m 0444 ${CUSTOM_CALC_FILES} $RPM_BUILD_ROOT${CUSTOMLIBDIR}
 install -m 0444 ${CUSTOM_HELP} $RPM_BUILD_ROOT${CUSTOMHELPDIR}
 if [ ! -z "${ALLOW_CUSTOM}" ]; then
    install -m 0644 libcustcalc.a $RPM_BUILD_ROOT${CUSTOMLIBDIR}
    ${RANLIB} $RPM_BUILD_ROOT${CUSTOMLIBDIR}
 fi
)

(cd cscript
 install -m 0555 ${SCRIPT} $RPM_BUILD_ROOT${SCRIPTDIR}
)

install -m 0444 libcalc.a $RPM_BUILD_ROOT${LIBDIR}
${RANLIB} $RPM_BUILD_ROOT${LIBDIR}
install -m 0444 ${LIB_H_SRC} $RPM_BUILD_ROOT${INCDIRCALC}
install -m 0444 ${BUILD_H_SRC} $RPM_BUILD_ROOT${INCDIRCALC}
install -m 0444 calc.1 $RPM_BUILD_ROOT${MANDIR}.${MANEXT}

%clean
rm -rf $RPM_BUILD_ROOT

%files -f install.list
%defattr(-,root,root)
%doc BUGS README COPYING COPYING-LGPL HOWTO.INSTALL
%doc README LIBRARY README.WINDOWS calc.1
%doc help/resource help/errorcodes help/custom_cal help/new_custom
%doc help/cscript help/full

%changelog
* ${DATE} Landon Curt Noll <http://www.isthe.com/chongo/index.html>
- calc version ${VER_CALC}
